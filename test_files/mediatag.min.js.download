function ValidURL(t){return!!/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(t)}function isValidVideoSource(t){return!!(0<=t.indexOf("vod")||0<=t.indexOf("youtube")||t.indexOf(!1)||0<=t.indexOf("vimeo")||0<=t.indexOf("jwplatform")||0<=t.indexOf("jwplayer")||0<=t.indexOf("dailymotion.com")||0<=t.indexOf("dai.ly"))}function GenerateMediaTag(t,e,a,i,m){void 0===e&&(e=!1),void 0===a&&(a=!1),void 0===i&&(i=""),void 0===m&&(m=""),t.image_path=t.image_path.replace("http://www.star2.com/wp-content","https://cdn.star2.com/wp-content").replace("http://cdn.star2.com/wp-content","https://cdn.star2.com/wp-content").replace("http://www1.star2.com/wp-content","https://cdn.star2.com/wp-content");var r="",s=parseInt(t.media_type),o="";switch(t.image_alt_text&&(o=t.image_alt_text.replace(/[^a-zA-Z0-9-. ]/g,"")),s){case 0:var c,n,g,h,p,d="";try{var l=JSON.parse(t.image_cropping)}catch(t){l=""}void 0!==l.original_image&&(d=""),e?(null!=(c=t.image_path.split("/"))[9]&&(d="width:"+(n=c[9].split("x"))[0]+"px;height:"+n[1]+"px;"),h=t.image_path.indexOf("https://"),p=t.image_path.indexOf("http://"),r=0<=h||0<=p?"<img data-source="+t.image_path+" style='"+d+"' src='"+t.image_path+"' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" />":"<img data-source="+t.image_path+" style='"+d+"' src='"+IMAGE_URL+t.image_path+"' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" />",c.indexOf("tsol-default-image2017.png")<0&&c.indexOf("no-image.png")<0&&4<c.length&&""!=m&&(c.splice(c.length-1,0,"thumbs/"+m),g=c.join("/"),r=0<=h||0<=p?"<img data-source="+g+" style='"+d+"' src='"+g+"' alt='"+o+"' onerror=\"this.onerror=null;this.src='"+t.image_path+"'\" />":"<img data-source="+g+" style='"+d+"' src='"+IMAGE_URL+g+"' alt='"+o+"' onerror=\"this.onerror=null;this.src='"+IMAGE_URL+t.image_path+"'\" />")):(h=t.image_path.indexOf("https://"),p=t.image_path.indexOf("http://"),r=0<=h||0<=p?"<img data-source="+t.image_path+" src='"+t.image_path+"' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\"/>":"<img data-source="+t.image_path+" src='"+IMAGE_URL+t.image_path+"' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" />");break;case 1:r="<img data-source="+t.image_path+" src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png' alt='"+o+"' />";break;case 2:var _=new URL(t.image_path),f=new URLSearchParams(_.search);(f=_.searchParams).get("v")&&(t.image_path=f.get("v")),r=a?"<div class='iframe-container'><iframe width='620' height='413' src='https://www.youtube.com/embed/"+t.image_path+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>":"<img data-source="+t.image_path+" src='https://img.youtube.com/vi/"+t.image_path+"/hqdefault.jpg' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" /><div class='vid-icon'><img src='/theme_metro/images/play-icon.png' alt='icon video'> </div>";break;case 6:-1<(_=t.image_caption.indexOf("Embed"))&&(t.image_caption=t.image_caption.substr(t.image_caption.lastIndexOf("/")+1)),r=a?"<iframe width='100%' frameborder='0' allowfullscreen  src='https://vod-platform.net/Embed/"+t.image_caption+"' frameborder='0'></iframe>":"<img data-source="+t.image_path+" src='https://vod-platform.net/image/"+t.image_caption+"' alt='"+o+"' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" /><div class='vid-icon'><img src='/theme_metro/images/play-icon.png' alt='icon video'> </div>";break;default:r=0<=(h=t.image_path.indexOf("http"))?"<img data-source="+t.image_path+" src='"+t.image_path+"' alt='' onerror=\"this.src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png'\" />":"<img data-source="+t.image_path+" src='https://cdn.thestar.com.my/Themes/img/tsol-default-image2017.png' alt='"+o+"' />"}0==s&&""!=i&&ValidURL(i)&&isValidVideoSource(i)&&(r+="<div class='vid-icon'><img src='/theme_metro/images/play-icon.png' alt='icon video'> </div>"),document.write(r)}